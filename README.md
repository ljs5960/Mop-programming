# Mop-programming
몹 프로그래밍 실습
<h1>결재 서비스(쿠폰, 적립금, 결재 알림)</h1>

<h3> 개념</h3>

- 계정, 결제, 적립금 정책
  - 행위 : 결제 처리, 적립 알림
  
<h3> 결제 1 </h3>

```java

class PaymentService {
    void pay(amount, customerId);
}

java```

- 고객의 계정은 이미 존재.
  - 계정이 없으면 예외 발생.
  - 결재는 계정에 의존함.

- 결제
  - 결재 요청 정보와 고객 정보(고객아이디 등)가 전달
  - 결재 금액이 유효해야함.(음수이면 안됨)
  - 실 결재 금액을 기준으로 적립율에 따라서 적립됨.
  - 적립금은 고객의 계정에 쌓임
  
- 결재 완료
  - SMS 알림 발생(Dummy). 만약 알림 발송이 실패해도, 결재는 정상적으로 완료.
  - 결재 완료 후 영수증 발행.  
  
<h3> 결제 2 </h3>
  결재 시 적립금을 사용할 수 있음.
  
<h3> 결제 3 </h3>
  결재 완료 시 SMS 뿐만 아니라 앱 푸시(Dummy), 이메일도 전송
  
<h3> 결제 4 </h3>  

```java
class PaymentService {
    void pay(amount, customerId, coupon);
}
```java

정액, %기반 할인 쿠폰 적용
- 1000원 쿠폰, 10% 할인 쿠폰


<h2> TDD로 진행하기 </h2>
1. 재빨리 테스트를 하나 추가
2. 테스트를 실행하고, 실패하는지 확인
3. 코드를 조금 수정
4. 테스트를 실행하고 성공하는지 확인
5. 리팩토링(1. 또는 2.로 반복)
  
  
  
